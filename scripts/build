#!/bin/bash

BC_DOCKER_IMAGE_NAME=${GO_PIPELINE_NAME}
BC_TAG_VERSION=${GO_PIPELINE_LABEL}.${GO_STAGE_COUNTER}
BC_TAG_NAME=${BC_DOCKER_IMAGE_NAME}:${BC_TAG_VERSION}

if [ -z "$BC_DOCKERFILE_FOLDER" ];
	then docker build -t ${BC_PVTDEV_REGISTRY}/${BC_TAG_NAME} ${BC_DOCKERFILE_FOLDER};
	else docker build -t ${BC_PVTDEV_REGISTRY}/${BC_TAG_NAME} -f ${BC_DOCKERFILE_FOLDER}${BC_DOCKERFILE_NAME} ${BC_DOCKERFILE_FOLDER};
fi
#docker build -t ${BC_PVTDEV_REGISTRY}/${BC_TAG_NAME} -f ${BC_DOCKERFILE_FOLDER}${BC_DOCKERFILE_NAME} ${BC_DOCKERFILE_FOLDER}

set | grep ^BC_ > version-artifact